<!DOCTYPE html>
<html>
    <head>
        <title>Relay Client (Phone Layout)</title>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
        <meta name="application-name" CONTENT="relay">
        <meta name="keywords" CONTENT="relay, client, phone">

        <script src="client/client.js"></script>
        <link rel="stylesheet" href="client/themes/minimal/minimal.css" type="text/css" />

        <script>
            // TODO: auto scroll to focus container

            Client.execute("PGP.LIST.PRIVATE");
            Client.execute("PGP.CONTACT");
            Client.execute("AUTOJOIN");

            function onResize() {
                document.body.classList.add(window.innerWidth > window.innerHeight / 1.2 ? 'layout-horizontal' : 'layout-vertical');
                document.body.classList.remove(window.innerWidth > window.innerHeight / 1.2 ? 'layout-vertical' : 'layout-horizontal');
            }
            window.onresize = onResize;
            setTimeout(onResize, 500);

//             var scrollTimeout = null;
//             function onScroll() {
//                 if(scrollTimeout)
//                     clearTimeout(scrollTimeout);
//                 scrollTimeout = setTimeout(function() {
//                     var closestElm = null;
//                     var closestOffset = 99999;
//                     for(var i=0; i<document.body.children.length; i++) {
//                         var child = document.body.children[i];
//                         var offset = Math.abs(window.scrollY - child.offsetTop);
//                         if(offset < closestOffset) {
//                             closestElm = child;
//                             closestOffset = offset;
//                         }
//                     }
//                     console.log(window.scrollY, closestOffset);
//                     if(closestOffset > 2) 
//                         document.body.scrollTop = closestOffset;

//                 }, 100);
//             }
//             window.onscroll = onScroll;

        </script>
    </head>
    <body class='theme-minimal layout-vertical'></body>
</html>